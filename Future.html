<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.36.1">
<meta name="crystal_docs.project_version" content="master-dev">
<meta name="crystal_docs.project_name" content="alizarin">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="alizarin">
  <title>Future - alizarin master-dev</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          alizarin
        </a>
      </h1>

      <span class="project-version">
        master-dev
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="alizarin/Alizarin" data-name="alizarin">
      <a href="Alizarin.html">Alizarin</a>
      
    </li>
  
  <li class=" current" data-id="alizarin/Future" data-name="future">
      <a href="Future.html">Future</a>
      
    </li>
  
  <li class=" " data-id="alizarin/Invokable" data-name="invokable">
      <a href="Invokable.html">Invokable</a>
      
    </li>
  
  <li class=" " data-id="alizarin/JSCClass" data-name="jscclass">
      <a href="JSCClass.html">JSCClass</a>
      
    </li>
  
  <li class=" " data-id="alizarin/JSCContext" data-name="jsccontext">
      <a href="JSCContext.html">JSCContext</a>
      
    </li>
  
  <li class="parent " data-id="alizarin/JSCFunction" data-name="jscfunction">
      <a href="JSCFunction.html">JSCFunction</a>
      
        <ul>
  
  <li class=" " data-id="alizarin/JSCFunction/CallBack" data-name="jscfunction::callback">
      <a href="JSCFunction/CallBack.html">CallBack</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="alizarin/JSCObject" data-name="jscobject">
      <a href="JSCObject.html">JSCObject</a>
      
        <ul>
  
  <li class="parent " data-id="alizarin/JSCObject/Accessor" data-name="jscobject::accessor(t)">
      <a href="JSCObject/Accessor.html">Accessor</a>
      
        <ul>
  
  <li class=" " data-id="alizarin/JSCObject/Accessor/Accessibility" data-name="jscobject::accessor::accessibility">
      <a href="JSCObject/Accessor/Accessibility.html">Accessibility</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="alizarin/JSCPrimative" data-name="jscprimative">
      <a href="JSCPrimative.html">JSCPrimative</a>
      
    </li>
  
  <li class=" " data-id="alizarin/JSObjectUtils" data-name="jsobjectutils">
      <a href="JSObjectUtils.html">JSObjectUtils</a>
      
    </li>
  
  <li class="parent " data-id="alizarin/WebExtension" data-name="webextension">
      <a href="WebExtension.html">WebExtension</a>
      
        <ul>
  
  <li class=" " data-id="alizarin/WebExtension/Chainable" data-name="webextension::chainable">
      <a href="WebExtension/Chainable.html">Chainable</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebExtension/IPC" data-name="webextension::ipc">
      <a href="WebExtension/IPC.html">IPC</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebExtension/JSCInstanceMethod" data-name="webextension::jscinstancemethod">
      <a href="WebExtension/JSCInstanceMethod.html">JSCInstanceMethod</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="alizarin/WebView" data-name="webview">
      <a href="WebView.html">WebView</a>
      
        <ul>
  
  <li class=" " data-id="alizarin/WebView/Callback" data-name="webview::callback">
      <a href="WebView/Callback.html">Callback</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebView/Dialog" data-name="webview::dialog">
      <a href="WebView/Dialog.html">Dialog</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebView/DialogFileFilter" data-name="webview::dialogfilefilter">
      <a href="WebView/DialogFileFilter.html">DialogFileFilter</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebView/OpenFileDialog" data-name="webview::openfiledialog">
      <a href="WebView/OpenFileDialog.html">OpenFileDialog</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebView/SaveFileDialog" data-name="webview::savefiledialog">
      <a href="WebView/SaveFileDialog.html">SaveFileDialog</a>
      
    </li>
  
  <li class=" " data-id="alizarin/WebView/SelectFolderDialog" data-name="webview::selectfolderdialog">
      <a href="WebView/SelectFolderDialog.html">SelectFolderDialog</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Future

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="Future.html">Future</a></li><li class="superclass"><a href="JSCObject.html">JSCObject</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p><code><a href="Future.html">Future</a></code> is a Promise-like native extension. It provides another option to developers by which
they can organize their asynchronous code better without worring about callback hells or writing to much
Crystal code to handle async tasks in JS.</p>

<p>We can use it directly in Crystal ...</p>

<ol><li>extension.cr</li></ol>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;alizarin&quot;</span>
<span class="k">include</span> <span class="t">WebExtension</span>
initialize_extension <span class="k">do</span>
  read_file_async <span class="o">=</span> function p <span class="k">do</span>
    file_path <span class="o">=</span> p.first.to_s
    <span class="k">new</span> <span class="t">JSCContext</span>.get_value(<span class="s">&quot;Future&quot;</span>), (function p <span class="k">do</span>
      resolve <span class="o">=</span> p.first.<span class="k">as</span>(<span class="t">JSCFunction</span>)
      resolve.call <span class="t">File</span>.read(file_path)
    <span class="k">end</span>)
  <span class="k">end</span>
  <span class="t">JSCContext</span>.set_value <span class="s">&quot;read_file_async&quot;</span>, read_file_async
<span class="k">end</span></code></pre>

<p>... or in JavaScript</p>

<pre><code class="language-crystal">var future <span class="o">=</span> <span class="k">new</span> <span class="t">Future</span>((resolve, reject)=>{
  resolve(<span class="s">&quot;World&quot;</span>);
});
future.<span class="k">then</span>((value,resolve,reject)=>{
  console.log(<span class="s">`Hello {value}`</span>);  <span class="o">//</span>note that you must resolve this callback, otherwise....
}).<span class="k">then</span>((value)=>{
  <span class="o">//</span>.... this callback will not be executed
});</code></pre>

<p><span class="flag purple">NOTE</span>  Be sure to call <code><a href="Future.html#resolve(p)-instance-method">Future#resolve</a></code> or <code><a href="Future.html#reject(p)-instance-method">Future#reject</a></code> inside each callback, otherwise your later callbacks will not run.</p>





  <h2>
    <a id="included-modules" class="anchor" href="#included-modules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Included Modules
  </h2>
  <ul class="other-types-list">
    
      <li class="other-type"><a href="JSCClass.html">JSCClass</a></li>
    
  </ul>










  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      components/future.cr
    
    <br/>
  









  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#catch(p)-instance-method" class="signature"><strong>#catch</strong>(p)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#next_callback-instance-method" class="signature"><strong>#next_callback</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#reject(p)-instance-method" class="signature"><strong>#reject</strong>(p)</a>
        
          <div class="summary"><p>Reject the <code><a href="Future.html">Future</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#resolve(p)-instance-method" class="signature"><strong>#resolve</strong>(p)</a>
        
          <div class="summary"><p>Resolves a callback.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#then(p)-instance-method" class="signature"><strong>#then</strong>(p)</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    


    


    


  
    

  <h3>Instance methods inherited from class <code><a href="JSCObject.html">JSCObject</a></code></h3>
  
  
    <a href="JSCObject.html#define_property(name,value,flags:Accessor::Accessibility)-instance-method" class="tooltip">
      <span>define_property(name, value, flags : Accessor::Accessibility)</span>
    define_property</a>, 
    
  
    <a href="JSCObject.html#mount_accessor(accessor:Accessor)-instance-method" class="tooltip">
      <span>mount_accessor(accessor : Accessor)</span>
    mount_accessor</a>, 
    
  
    <a href="JSCObject.html#properties-instance-method" class="tooltip">
      <span>properties</span>
    properties</a>
    
  


    

  <h3>Constructor methods inherited from class <code><a href="JSCObject.html">JSCObject</a></code></h3>
  
  
    <a href="JSCObject.html#new-class-method" class="tooltip">
      <span>new</span>
    new</a>
    
  


    


  
    

  <h3>Instance methods inherited from module <code><a href="Invokable.html">Invokable</a></code></h3>
  
  
    <a href="Invokable.html#invoke(name:String,*args)-instance-method" class="tooltip">
      <span>invoke(name : String, *args)</span>
    invoke</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="JSObjectUtils.html">JSObjectUtils</a></code></h3>
  
  
    <a href="JSObjectUtils.html#[](name:String)-instance-method" class="tooltip">
      <span>[](name : String)<br/>[](index : UInt32)</span>
    []</a>, 
    
  
    <a href="JSObjectUtils.html#[]=(name:String,value)-instance-method" class="tooltip">
      <span>[]=(name : String, value)<br/>[]=(index : UInt32, value)</span>
    []=</a>, 
    
  
    <a href="JSObjectUtils.html#delete(name:String)-instance-method" class="tooltip">
      <span>delete(name : String)</span>
    delete</a>, 
    
  
    <a href="JSObjectUtils.html#is_array?-instance-method" class="tooltip">
      <span>is_array?</span>
    is_array?</a>, 
    
  
    <a href="JSObjectUtils.html#is_bool?-instance-method" class="tooltip">
      <span>is_bool?</span>
    is_bool?</a>, 
    
  
    <a href="JSObjectUtils.html#is_instance_of?(class_name:String)-instance-method" class="tooltip">
      <span>is_instance_of?(class_name : String)</span>
    is_instance_of?</a>, 
    
  
    <a href="JSObjectUtils.html#is_null?-instance-method" class="tooltip">
      <span>is_null?</span>
    is_null?</a>, 
    
  
    <a href="JSObjectUtils.html#is_number?-instance-method" class="tooltip">
      <span>is_number?</span>
    is_number?</a>, 
    
  
    <a href="JSObjectUtils.html#is_string?-instance-method" class="tooltip">
      <span>is_string?</span>
    is_string?</a>, 
    
  
    <a href="JSObjectUtils.html#is_undefined?-instance-method" class="tooltip">
      <span>is_undefined?</span>
    is_undefined?</a>, 
    
  
    <a href="JSObjectUtils.html#to_b-instance-method" class="tooltip">
      <span>to_b</span>
    to_b</a>, 
    
  
    <a href="JSObjectUtils.html#to_f64-instance-method" class="tooltip">
      <span>to_f64</span>
    to_f64</a>, 
    
  
    <a href="JSObjectUtils.html#to_i32-instance-method" class="tooltip">
      <span>to_i32</span>
    to_i32</a>, 
    
  
    <a href="JSObjectUtils.html#to_s-instance-method" class="tooltip">
      <span>to_s</span>
    to_s</a>
    
  


    


    


  
    


    


    


  
    


    


    


  
</div>






  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="catch(p)-instance-method">
      <div class="signature">
        
        def <strong>catch</strong>(p)

        <a class="method-permalink" href="#catch(p)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="next_callback-instance-method">
      <div class="signature">
        
        def <strong>next_callback</strong>

        <a class="method-permalink" href="#next_callback-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="reject(p)-instance-method">
      <div class="signature">
        
        def <strong>reject</strong>(p)

        <a class="method-permalink" href="#reject(p)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Reject the <code><a href="Future.html">Future</a></code>.</p>

<p>This method is the same with the one passed as the third parameter of each <em>then</em>'s callback.
When a callback call <code><a href="Future.html#reject(p)-instance-method">#reject</a></code>, all other then will be skip over and the callback passed to <code><a href="Future.html#catch(p)-instance-method">Future#catch</a></code> will be executed.
Let's see the following example:</p>

<pre><code class="language-crystal">var f <span class="o">=</span> <span class="k">new</span> <span class="t">Future</span>((resolve, reject)=>{
  try{
    throw <span class="s">&quot;Oops!&quot;</span>;
  }
  catch{
    reject(<span class="s">&quot;Future rejected!&quot;</span>);   
  }
}).<span class="k">then</span>(value => {
    console.log(<span class="s">&quot;Hello&quot;</span>);
    <span class="o">//</span> this callback will not be called because this <span class="s">`Future`</span> is rejected!
}).catch((msg)=>{
  console.log(<span class="s">`Rejected message {msg}`</span>)  
});
<span class="o">//</span> <span class="t">To</span> get the later callback running, we can invoke method <span class="s">`f.resolve`</span>, e.g:
f.resolve(<span class="n">1</span>);</code></pre>

<blockquote>Output: Hello</blockquote>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="resolve(p)-instance-method">
      <div class="signature">
        
        def <strong>resolve</strong>(p)

        <a class="method-permalink" href="#resolve(p)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Resolves a callback.</p>

<p>This method is the same with the one passed as the second parameter of each <em>then</em>'s callback.
Let's see the following example:</p>

<pre><code class="language-crystal">var f <span class="o">=</span> <span class="k">new</span> <span class="t">Future</span>((resolve, reject)=>{
  <span class="o">//</span> <span class="k">do</span> nothing
}).<span class="k">then</span>(value => {
    console.log(<span class="s">&quot;Hello&quot;</span>);
    <span class="o">//</span> this callback will not be called because the callback above it did not resolve.
});
<span class="o">//</span> <span class="t">To</span> get the later callback running, we can invoke method <span class="s">`f.resolve`</span>, e.g:
f.resolve(<span class="n">1</span>);</code></pre>

<blockquote>Output: Hello</blockquote>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="then(p)-instance-method">
      <div class="signature">
        
        def <strong>then</strong>(p)

        <a class="method-permalink" href="#then(p)-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  




</div>

</body>
</html>
